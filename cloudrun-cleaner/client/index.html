<!DOCTYPE html>
<html>
<head>
   <title>DataWash-CSV</title>
</head>
<body>
   <h2> Upload CSV â†’ Auto Clean </h2>
   <input type="file" id="csv">
   <button onclick="uploadCSV()">Clean File</button>

   <pre id="output"></pre>

   <script src="app.js"></script>
</body>
</html>
<form id="uploadForm" enctype="multipart/form-data">
    <input type="file" name="file" accept=".csv">
    <button>Clean File</button>
</form>

<script>
document.getElementById("uploadForm").addEventListener("submit", async(e)=>{
    e.preventDefault();
    let file = document.querySelector("input[type=file]").files[0];
    let form = new FormData();
    form.append("file", file);

    let res = await fetch("/api/clean", { method:"POST", body:form });

    if(res.ok){
        let blob = await res.blob();
        let url = URL.createObjectURL(blob);
        let a = document.createElement("a");
        a.href = url;
        a.download = "cleaned.csv";
        a.click();
    } else {
        alert("Upload Failed");
    }
});
</script>
